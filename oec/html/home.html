{% extends "templates/site.html" %}

{% block head %}
  <link type="text/css" rel="stylesheet" media="all" href="/static/css/styles.home.css" />
{% endblock %}

{% block body %}

  <div id="logo_large"><h1>The Observatory of Economic Complexity</h1></div>
  
  <div id="search">
    
    <select id="language_selector">
      {% for lang_id, lang_name in g.supported_langs.iteritems() %}
      <option value="{{ lang_id }}" {% if lang_id == g.locale %} selected="selected" {% endif %}>{{ lang_name }}</option>
      {% endfor %}
    </select>
    
    <input type="text" data-provide="typeahead" autocomplete="off" autofocus="" placeholder="What does Paraguay export?" />
  </div>
  
  <h2>
    The Observatory of Economic Complexity makes international trade data and economic complexity indicators available through millions of interactive visualizations.
  </h2>
  
{% endblock %}


{% block js %}
<script src="/static/js/libs/jquery/jquery-1.7.1.min.js"></script>
<script src="/static/js/libs/typeahead.min.js"></script>
<script>
  
  $('#search input').typeahead({
    name: 'my_search',
    limit: 10,
    remote: {
      url:'/search/?q=%QUERY',
      filter: function(resp) { return resp.items; }
    }
  });
  
  $('#search input').focus()
  
  $('#search input').bind('typeahead:selected', function(obj, datum, name) {      
    window.location = "explore/"+datum["name"];
  });
</script>
{% endblock %}