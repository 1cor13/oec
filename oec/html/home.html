{% extends "templates/site.html" %}

{% block head %}
<link type="text/css" rel="stylesheet" media="all" href="/static/css/styles.home.css" />
{% endblock %}

{% block body %}
<div id="content">
  
  <div id="search">
    <h3>Search a Country or Product</h3>
    <input type="text" data-provide="typeahead" autocomplete="off" autofocus="" placeholder="What does Paraguay export?" />
  </div>
  
  <div class="other_apps">
    <h3>Explore More Apps</h3>
    <div class="item">
      <a href="/explore/tree_map/export/{{default_country.name_3char|lower}}/all/show/2010/"><img src="/static/img/home/teaser_tree_map.png"></a>
    </div>
    <div class="item">
      <a href="/explore/stacked/export/{{default_country.name_3char|lower}}/all/show/1995.2010.2/"><img src="/static/img/home/teaser_stacked.png"></a>
    </div>
    <div class="item">
      <a href="/explore/map/export/show/all/3330/2010/"><img src="/static/img/home/teaser_map.png"></a>
    </div>
    <div class="item">
      <a href="/explore/product_space/export/{{default_country.name_3char|lower}}/all/show/2010/"><img src="/static/img/home/teaser_product_space.png"></a>
    </div>
  </div>
</div> <!-- END #content div -->
{% endblock %}


{% block js %}
<script src="/static/js/libs/jquery/jquery-1.7.1.min.js"></script>
<script src="/static/js/libs/typeahead.min.js"></script>
<script>
  
  $('#search input').typeahead({
    name: 'my_search',
    limit: 10,
    remote: {
      url:'/search/?q=%QUERY',
      filter: function(resp) { return resp.items; }
    }
  });
  
  $('#search input').focus()
  
  $('#search input').bind('typeahead:selected', function(obj, datum, name) {      
    window.location = "explore/"+datum["name"];
  });
</script>
{% endblock %}